<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="//cloud.typography.com/7584252/697004/css/fonts.css" rel="stylesheet" title="dev">
    <link href="//cloud.typography.com/7584252/694584/css/fonts.css" rel="stylesheet" title="prod">
    <link href="libraries/masala-ux/dist/css/masala-ux.min.css" rel="stylesheet" />
    <link href="css/NE-UTB-style.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<body aria-role="document">

    <nav id="NE-top-floating-header" class="navigation" aria-role="navigation">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                            <span class="sr-only">Visa eller dölj navigationen</span>
                            <i class="fa fa-bars"></i>
                        </button>
                        <a class="navbar-brand ne-logo" href="/" title="Gå till startsidan för NE.se">NE Nationalencyklopedin</a>
                        <a class="navbar-brand pl-xs hidden-xs" href="" id="NE-navbar-title" style="font-size: 1.6em; margin-top: -1px">Utbildning</a>
                    </div>
                    <div id="NE-page-indicator" class=" hidden-xs">0</div>
                </div>
            </div>
        </div>
    </nav>

    <main>

        <article id="NE-main-container">

            <div id="NE-chapter-container">
                <header id="NE-chapter-0" class="NE-chapter NE-scroll-watched">
                    asdasd
                </header>
                <div id="NE-chapter-1" class="NE-chapter NE-scroll-watched">
                    asdasd asdasd
                </div>
                <div id="NE-chapter-2" class="NE-chapter NE-scroll-watched">
                    dfsdfsdfsdf
                </div>
            </div>


        </article>

    </main>

    <footer id="NE-floating-footer">
        asdasdasd asd asd as
    </footer>


    <script src="libraries/masala-ux/dist/js/jquery.min.js"></script>
    <script src="libraries/masala-ux/dist/js/masala-ux.min.js"></script>
    <script src="scripts/ScrollWatch.js"></script>

    <script type="text/javascript">

        var currentChap = 0;

        $(document).ready(function () {


            $('#NE-floating-footer').on('click', function () {

                //     $('#NE-main-container').css('overflow', 'hidden');

                currentChap++;
                $('#NE-chapter-' + currentChap).css('display', 'block');
                var scrollPos = $('#NE-chapter-' + currentChap).position().top;
                $('#NE-main-container').animate({ 'scrollTop': scrollPos }, 500, 'swing', function () {
                    $('#NE-chapter-' + (currentChap - 1)).css({ 'min-height': '0px', 'height': '0px' });
                    $('#NE-main-container').scrollTop(0);
                    //     $('#NE-main-container').css('overflow', 'scroll');
                });



            });


            var mostVisibleChapter,
                highestVisibility = 0;

            $('#NE-main-container').on('sw-begin-scroll', function () {
                mostVisibleChapter = null;
                highestVisibility = 0;
            })


            $('.NE-chapter').on('sw-scrolled', function (e, scrollObj) {
                var threshold = mostVisibleChapter ? 0.5 : highestVisibility;

                if (scrollObj.visibility > threshold) {
                    mostVisibleChapter = $(this);
                    highestVisibility = scrollObj.visibility;
                }

            });

            $('#NE-main-container').on('sw-end-scroll', function () {
                if (mostVisibleChapter) {
                    var chapNum = mostVisibleChapter.attr('id');
                    chapNum = chapNum.substring(chapNum.lastIndexOf('-') + 1);
                    $('#NE-page-indicator').html(parseInt(chapNum) + 1);
                }
            });


            scrollWatcher = $('.NE-scroll-watched').ScrollWatch({
                axis: 'y',
                prioritize: 'max', //'partofviewport'//'partofobject'
                mainListener: $('#NE-main-container') // The element that is watched for scroll events and recives 'global' events such as start and stop. Defautls to window
            });


            $('body, #NE-floating-footer, #NE-top-floating-header').on('touchmove', function (e) {
                e.preventDefault();
                console.log(23);
            });

        });

    </script>

</body>
</html>
