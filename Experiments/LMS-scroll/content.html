<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <!--<link href="//cloud.typography.com/7584252/697004/css/fonts.css" rel="stylesheet" title="dev">
    <link href="//cloud.typography.com/7584252/694584/css/fonts.css" rel="stylesheet" title="prod">-->
    <link href="libraries/masala-ux/dist/css/masala-ux.min.css" rel="stylesheet" />
    <link href="css/NE-UTB-style.css" rel="stylesheet" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
</head>

<body aria-role="document">

    <nav id="NE-floating-header" class="navigation NE-offcanvas" aria-role="navigation">
        <div class="container">
            <div class="row">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Visa eller dölj navigationen</span>
                        <i class="fa fa-bars"></i>
                    </button>
                    <a class="navbar-brand ne-logo" href="/" title="Gå till startsidan för NE.se">NE Nationalencyklopedin</a>
                </div>
                <div id="NE-page-indicator" class="NE-offcanvas hidden-xs"></div>
            </div>
        </div>
    </nav>

    <article id="NE-main-container" class="container">
        <div id="scroller">

            <div id="NE-chapter-container">

                <div id="NE-chapter-0" class="NE-chapter NE-scroll-watched">

                    <div class="container">
                        <div id="NE-course-menu" class="row mt-lg">
                            <div class="col-xs-12">

                                <h1 class="page-header h1 font-weight-narrow keyline keyline-3x keyline-base0D keyline-bottom inline-block">Main heading</h1>
                                <ul>
                                    <li>Lorem Ipsum</li>
                                    <li>Condimentum facilisis</li>
                                    <li>Donec interdum metus</li>
                                    <li>Nulla facilisi</li>
                                </ul>

                            </div>
                        </div>
                    </div>

                </div>

                <div id="NE-chapter-1" class="NE-chapter NE-scroll-watched">


                    <div class="container">
                        <div class="row">
                            <div class="col-xs-12">
                                <h2>Chapter 3</h2>
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris interdum suscipit tempor. Nulla lacinia, nibh et imperdiet fringilla, eros ipsum mattis mi, ac luctus est nisl ac sapien. Nam at tempus neque, non tincidunt mauris. Sed et massa vulputate, convallis nisl at, ornare ligula. Sed interdum dictum quam laoreet tincidunt. Morbi ut venenatis urna. Integer vulputate mi at massa efficitur facilisis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam facilisis tristique erat, tincidunt cursus eros. Nam aliquam, nunc sed posuere ornare, mauris tortor molestie est, eu bibendum dui justo sed mauris.
                                </p>
                                <p>
                                    Maecenas pulvinar nisl ut condimentum facilisis. Nulla pulvinar arcu at aliquam ultricies. Sed venenatis lobortis metus et tempor. Aenean tempus accumsan egestas. Morbi at dui non massa tempor condimentum ac sit amet purus. Ut imperdiet gravida porta. In hac habitasse platea dictumst. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis mattis pulvinar massa sed ultricies.
                                </p>
                                Nunc semper sapien non risus convallis vestibulum. Vestibulum ac auctor libero, at dignissim purus. Donec interdum metus lacus, at venenatis enim iaculis vel. Integer feugiat justo lorem, vitae volutpat massa pharetra quis. Maecenas a mauris blandit mauris auctor dignissim. Nam vel sapien maximus, laoreet purus et, lobortis velit. Curabitur massa risus, bibendum vel elementum et, sodales id arcu. Vestibulum vehicula gravida nisl ut mattis. Phasellus dictum, massa at viverra sollicitudin, lacus elit convallis augue, a porta purus lacus a nulla. Curabitur nunc orci, gravida nec auctor congue, imperdiet eu lacus. Integer sollicitudin lorem nec mi iaculis, molestie vehicula elit elementum. Quisque vulputate sem id hendrerit pretium. Proin facilisis congue suscipit. Fusce efficitur ipsum risus, in consectetur velit feugiat ac. Etiam convallis dapibus dui, at eleifend odio egestas nec.

                                <p>
                                    Nulla facilisi. Nullam eu leo pellentesque, feugiat felis tempor, varius libero. Sed vitae orci in tellus vestibulum consectetur. Phasellus luctus ultricies lacus eu tristique. Nulla finibus eros quis semper malesuada. Suspendisse nec dictum nisi, id tempor nulla. Cras a egestas tortor. Aenean erat quam, efficitur sit amet ipsum in, porta pretium justo. Mauris est nulla, molestie vel cursus quis, congue vel eros. Fusce a nisl sed odio tempor maximus. Nam commodo accumsan rhoncus. Fusce at consequat purus. Praesent ac massa vitae erat feugiat egestas a a dui. In congue quam in velit varius, in tincidunt sem condimentum. Quisque efficitur eros eget semper suscipit. Nulla sed rhoncus erat, sed sollicitudin nibh.
                                </p>
                                <p>
                                    Curabitur vel tellus non ipsum euismod molestie a in sem. Vivamus suscipit nibh ex, gravida ultricies neque facilisis ac. Quisque semper luctus condimentum. Maecenas vel sagittis sem. Donec at commodo augue. Morbi nec fermentum ligula, at vestibulum neque. Mauris vestibulum odio id lorem tincidunt lobortis nec vitae orci. Mauris lectus neque, vestibulum nec sodales quis, molestie ut dui. Fusce eget neque consectetur, congue neque sed, faucibus felis. Duis blandit ligula vitae metus volutpat mattis. Etiam eu ex eget purus vulputate mollis vel venenatis risus. Etiam venenatis laoreet vulputate.
                                </p>

                                <h3>Chapter 3-2</h3>
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Mauris interdum suscipit tempor. Nulla lacinia, nibh et imperdiet fringilla, eros ipsum mattis mi, ac luctus est nisl ac sapien. Nam at tempus neque, non tincidunt mauris. Sed et massa vulputate, convallis nisl at, ornare ligula. Sed interdum dictum quam laoreet tincidunt. Morbi ut venenatis urna. Integer vulputate mi at massa efficitur facilisis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nullam facilisis tristique erat, tincidunt cursus eros. Nam aliquam, nunc sed posuere ornare, mauris tortor molestie est, eu bibendum dui justo sed mauris.
                                </p>
                                <p>
                                    Maecenas pulvinar nisl ut condimentum facilisis. Nulla pulvinar arcu at aliquam ultricies. Sed venenatis lobortis metus et tempor. Aenean tempus accumsan egestas. Morbi at dui non massa tempor condimentum ac sit amet purus. Ut imperdiet gravida porta. In hac habitasse platea dictumst. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Duis mattis pulvinar massa sed ultricies.
                                </p>
                                Nunc semper sapien non risus convallis vestibulum. Vestibulum ac auctor libero, at dignissim purus. Donec interdum metus lacus, at venenatis enim iaculis vel. Integer feugiat justo lorem, vitae volutpat massa pharetra quis. Maecenas a mauris blandit mauris auctor dignissim. Nam vel sapien maximus, laoreet purus et, lobortis velit. Curabitur massa risus, bibendum vel elementum et, sodales id arcu. Vestibulum vehicula gravida nisl ut mattis. Phasellus dictum, massa at viverra sollicitudin, lacus elit convallis augue, a porta purus lacus a nulla. Curabitur nunc orci, gravida nec auctor congue, imperdiet eu lacus. Integer sollicitudin lorem nec mi iaculis, molestie vehicula elit elementum. Quisque vulputate sem id hendrerit pretium. Proin facilisis congue suscipit. Fusce efficitur ipsum risus, in consectetur velit feugiat ac. Etiam convallis dapibus dui, at eleifend odio egestas nec.

                                <p>
                                    Nulla facilisi. Nullam eu leo pellentesque, feugiat felis tempor, varius libero. Sed vitae orci in tellus vestibulum consectetur. Phasellus luctus ultricies lacus eu tristique. Nulla finibus eros quis semper malesuada. Suspendisse nec dictum nisi, id tempor nulla. Cras a egestas tortor. Aenean erat quam, efficitur sit amet ipsum in, porta pretium justo. Mauris est nulla, molestie vel cursus quis, congue vel eros. Fusce a nisl sed odio tempor maximus. Nam commodo accumsan rhoncus. Fusce at consequat purus. Praesent ac massa vitae erat feugiat egestas a a dui. In congue quam in velit varius, in tincidunt sem condimentum. Quisque efficitur eros eget semper suscipit. Nulla sed rhoncus erat, sed sollicitudin nibh.
                                </p>
                                <p>
                                    Curabitur vel tellus non ipsum euismod molestie a in sem. Vivamus suscipit nibh ex, gravida ultricies neque facilisis ac. Quisque semper luctus condimentum. Maecenas vel sagittis sem. Donec at commodo augue. Morbi nec fermentum ligula, at vestibulum neque. Mauris vestibulum odio id lorem tincidunt lobortis nec vitae orci. Mauris lectus neque, vestibulum nec sodales quis, molestie ut dui. Fusce eget neque consectetur, congue neque sed, faucibus felis. Duis blandit ligula vitae metus volutpat mattis. Etiam eu ex eget purus vulputate mollis vel venenatis risus. Etiam venenatis laoreet vulputate.
                                </p>
                            </div>
                        </div>
                    </div>


                </div>
                <div id="NE-chapter-2" class="NE-chapter NE-scroll-watched">

                    <div class="container">
                        <div class="row">
                            <div class="col-xs-12">
                                dfsdfsdfsdf
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </article>

    <footer id="NE-floating-footer">
        <div class="container">
            <div class="row">
                <button type="button" id="NE-nav-back" class="btn btn-default">Back</button>
                <button type="button" id="NE-nav-forward" class="btn btn-default">Forward</button>
            </div>
        </div>
    </footer>

    <script src="libraries/masala-ux/dist/js/jquery.min.js"></script>
    <script src="libraries/masala-ux/dist/js/masala-ux.min.js"></script>
    <script src="scripts/ScrollWatch.js"></script>

    <script type="text/javascript">

        function getScrollbarWidth() {
            var outer = document.createElement("div");
            outer.style.visibility = "hidden";
            outer.style.width = "100px";
            outer.style.msOverflowStyle = "scrollbar"; // needed for WinJS apps

            document.body.appendChild(outer);

            var widthNoScroll = outer.offsetWidth;
            // force scrollbars
            outer.style.overflow = "scroll";

            // add innerdiv
            var inner = document.createElement("div");
            inner.style.width = "100%";
            outer.appendChild(inner);

            var widthWithScroll = inner.offsetWidth;

            // remove divs
            outer.parentNode.removeChild(outer);

            return widthNoScroll - widthWithScroll;
        }

        var currentChap = 0;
        var scrollBarWidth = getScrollbarWidth();
        alert(scrollBarWidth);
        function nav(prog) {

            currentChap += prog;

            var navObj = $('#NE-floating-header');
            var navHeight = navObj.outerHeight();

            var scrollPadd = 0;


            if (currentChap > 0 && navObj.hasClass('NE-offcanvas')) {
                navObj.removeClass('NE-offcanvas');
                $('#NE-main-container').css('top', navHeight + 'px');
                $('#NE-page-indicator').removeClass('NE-offcanvas');

                scrollPadd = navHeight;
            }
            else if (currentChap < 1 && !navObj.hasClass('NE-offcanvas')) {
                navObj.addClass('NE-offcanvas');
                $('#NE-main-container').css('top', '0px');
                $('#NE-page-indicator').addClass('NE-offcanvas');
            }


            var nextChapter = $('#NE-chapter-' + currentChap);
            nextChapter.css('display', 'block');
         
            if (nextChapter.find('.container').first().outerHeight() > nextChapter.innerHeight()) {
                nextChapter.css({
                    'overflow': 'auto',
                    'padding-left': scrollBarWidth + 'px'
                });
            }


            var scrollPos = $('#NE-chapter-' + currentChap).position().top;
            $('#scroller').animate({ 'scrollTop': scrollPos - scrollPadd }, 500, 'swing');

            var displayChap = currentChap == 0 ? ' ' : currentChap;

            $('#NE-page-indicator').html(displayChap);
        }

        $(document).ready(function () {


            $('#NE-nav-back').on('click', function () {
                nav(-1);
            });

            $('#NE-nav-forward').on('click', function () {
                nav(1);
            });


            var mostVisibleChapter,
                highestVisibility = 0;

            $('#scroller').on('sw-begin-scroll', function () {
                mostVisibleChapter = null;
                highestVisibility = 0;
            })


            $('.NE-chapter').on('sw-scrolled', function (e, scrollObj) {
                var threshold = mostVisibleChapter ? 0.5 : highestVisibility;

                if (scrollObj.visibility > threshold) {
                    mostVisibleChapter = $(this);
                    highestVisibility = scrollObj.visibility;
                }

            });

            $('#scroller').on('sw-end-scroll', function () {

            });


            scrollWatcher = $('.NE-scroll-watched').ScrollWatch({
                axis: 'y',
                prioritize: 'max', //'partofviewport'//'partofobject'
                mainListener: $('#scroller') // The element that is watched for scroll events and recives 'global' events such as start and stop. Defautls to window
            });


        });

    </script>

</body>
</html>
